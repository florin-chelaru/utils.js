/**
* @license utils.js
* Copyright (c) 2015 Florin Chelaru
* License: MIT
*
* Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated
* documentation files (the "Software"), to deal in the Software without restriction, including without limitation the
* rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to
* permit persons to whom the Software is furnished to do so, subject to the following conditions:
*
* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the
* Software.
*
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE
* WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
* COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
* OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
*/
(function(){'use strict';var e,f=this;function h(a,b){var c=a.split("."),d=f;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var g;c.length&&(g=c.shift());)c.length||void 0===b?d[g]?d=d[g]:d=d[g]={}:d[g]=b}function k(a,b){function c(){}c.prototype=b.prototype;a.N=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.M=function(a,c,m){for(var q=Array(arguments.length-2),r=2;r<arguments.length;r++)q[r-2]=arguments[r];return b.prototype[c].apply(a,q)}};function l(a,b){this.D=Error(a);this.H=b||null;this.message=this.D.message;this.name="Exception"}k(l,Error);Object.defineProperties(l.prototype,{stack:{get:function(){return this.D.stack}},innerException:{get:function(){return this.H}}});function n(a,b){l.apply(this,arguments);this.name="AbstractMethodException"}k(n,l);function p(a){return a?a.charAt(0).toUpperCase()+a.slice(1):a};function t(a,b){l.apply(this,arguments);this.name="UnimplementedException"}k(t,l);function v(a,b,c,d){this.lat=a||0;this.lng=b||0;this.zoom=c||0;this.range=d||0}v.prototype.a=function(a){return void 0==a?!1:this.lat==a.lat&&this.lng==a.lng&&this.zoom==a.zoom&&this.range==a.range};function w(a){return Array.isArray(a)?a:[].slice.apply(a)}function x(a,b){b=b||0;a=a||0;for(var c=Array(a),d=0;d<a;++d)c[d]=d+b;return c};function y(a,b){l.apply(this,arguments);this.name="ReflectionException"}k(y,l);function z(a,b,c){return c?new Promise(function(c){a&&a.length||c();var g,m;g=Array(a.length+1);g[0]=new Promise(function(a){m=a});m();a.forEach(function(a,c){g[c+1]=g[c].then(function(){return b.call(null,a,c)})});g[a.length].then(c)}):Promise.all(a.map(function(a,c){return b(a,c)}))}function A(){this.b=this.c=null;var a=this;this.a=new Promise(function(b,c){a.c=b;a.b=c})}A.prototype.i=function(a){this.c.call(this.a,a)};A.prototype.g=function(a){this.b.call(this.a,a)};
A.prototype.then=function(a,b){return this.a.then(a,b)};A.prototype.f=function(a){return this.a.catch(a)};function B(a,b){if(void 0==a)return a;var c;if(Array.isArray(a))for(c=0;c<a.length&&!1!==b.call(a[c],c,a[c]);++c);else for(c in a)if(!1===b.call(a[c],c,a[c]))break;return a}function C(a){return new Promise(function(b,c){var d=new XMLHttpRequest;d.open("GET",a,!0);d.onreadystatechange=function(){4===d.readyState&&(200!==d.status?c("Request failed with error code "+d.status):b(d.responseText))};d.send()})}
function D(a){return new Promise(function(b){if(a&&(a.content||a.uri))if(a.content){var c={};a.content.split(";").filter(function(a){return 0<a.trim().length}).map(function(a){return a.trim().split(":").map(function(a){return a.trim()})}).forEach(function(a){c[a[0].substr(1)]=a[1]});b(c)}else C(a.uri).then(function(a){return D({content:a})}).then(b);else b({})})};function E(a,b){this.G=++F;this.a=a;this.b=b}var F=-1;E.prototype.l=function(a){this.a.call(this.b,a)};Object.defineProperties(E.prototype,{id:{get:function(){return this.G}}});function G(a){this.F=a?!!a.O:!1;this.b=0;this.a={};this.j=!1;this.c=a&&a.timeout?a.timeout:setTimeout}Object.defineProperties(G.prototype,{synchronous:{get:function(){return this.F}},firing:{get:function(){return this.j}}});G.prototype.f=function(a,b){"function"==typeof a&&(a=new E(a,b));this.a[a.id]||++this.b;return this.a[a.id]=a};G.prototype.g=function(a){this.a[a.id]&&(delete this.a[a.id],--this.b)};
G.prototype.l=function(a){if(!this.j){var b=this,c=this.c,d=this.F,g=function(){0!=b.b&&(b.j=d,B(b.a,function(b,g){d?g.l(a):c.call(null,function(){g.l(a)},0)}))};d?g():c.call(null,g,0);this.j=!1}};function H(a){0>a&&(a=0);this.a=a;this.f=this.i=this.g=this.c=this.b=this.w=this.v=this.u=this.s=null}e=H.prototype;e.h=function(){null==this.b&&(this.b=Math.floor(this.A()));return this.b};e.m=function(){null==this.c&&(this.c=Math.floor(24*(this.A()-this.h())));return this.c};e.o=function(){null==this.g&&(this.g=Math.floor(60*(this.B()-Math.floor(this.B()))));return this.g};e.J=function(){null==this.i&&(this.i=Math.floor(60*(this.C()-Math.floor(this.C()))));return this.i};
e.I=function(){null==this.f&&(this.f=this.a%1E3);return this.f};e.A=function(){null==this.s&&(this.s=this.a/864E5);return this.s};e.B=function(){null==this.u&&(this.u=this.a/36E5);return this.u};e.C=function(){null==this.v&&(this.v=this.a/6E4);return this.v};e.L=function(){null==this.w&&(this.w=this.a/1E3);return this.w};e.K=function(){return this.a};
e.toString=function(){var a="";0<this.h()&&(a=1<this.h()?a+(this.h()+" days"):a+"one day");0<this.m()&&(a&&(a+=", "),a=1<this.m()?a+(this.m()+" hours"):a+"one hour");0<this.o()?(a&&(a+=" and "),a=1<this.o()?a+(this.o()+" minutes"):a+"one minute"):a||(a+="less than a minute");return p(a)};h("u.AbstractMethodException",n);h("u.array.fromArguments",w);h("u.array.fill",function(a,b){a=a||0;for(var c=Array(a),d=0;d<a;++d)c[d]=b;return c});h("u.array.range",x);h("u.array.unique",function(a){return a.reduce(function(a,c){0>a.indexOf(c)&&a.push(c);return a},[])});h("u.async.all",function(a,b){return b?z(a,function(a){return a()},b):Promise.all(a.map(function(a){return a()}))});h("u.async.for",function(a,b,c){return z(x(a),b,c)});h("u.async.each",z);h("u.async.do",function(a){return new Promise(function(b){function c(){return a(d++).then(function(a){return!a||c()})}var d=0;c().then(b)})});h("u.async.Deferred",A);A.prototype.resolve=A.prototype.i;A.prototype.reject=A.prototype.g;A.prototype.then=A.prototype.then;A.prototype["catch"]=A.prototype.f;h("u.EventListener",E);h("u.Event",G);G.prototype.addListener=G.prototype.f;G.prototype.removeListener=G.prototype.g;G.prototype.fire=G.prototype.l;h("u.Exception",l);h("u.Geolocation",v);v.prototype.equals=v.prototype.a;h("u.math.floorPrecision",function(a,b){if(0==b)return Math.floor(a);var c=Math.pow(10,b);return Math.floor(a*c)/c});h("u.reflection.evaluateFullyQualifiedTypeName",function(a){var b;try{for(var c=a.split("."),d=c.pop(),g=window,m=0;m<c.length;++m)g=g[c[m]];b=g[d]}catch(q){throw new y("Unknown type name: "+a,q);}if("function"!==typeof b)throw new y("Unknown type name: "+a);return b});h("u.reflection.applyConstructor",function(a,b){return new (Function.prototype.bind.apply(a,[null].concat(w(b))))});h("u.reflection.wrap",function(a,b){a.__proto__=b.prototype;return a});h("u.reflection.ReflectionException",y);h("u.string.capitalizeFirstLetter",p);h("u.TimeSpan",H);H.prototype.days=H.prototype.h;H.prototype.hours=H.prototype.m;H.prototype.minutes=H.prototype.o;H.prototype.seconds=H.prototype.J;H.prototype.milliseconds=H.prototype.I;H.prototype.totalDays=H.prototype.A;H.prototype.totalHours=H.prototype.B;H.prototype.totalMinutes=H.prototype.C;H.prototype.totalSeconds=H.prototype.L;H.prototype.totalMilliseconds=H.prototype.K;H.prototype.toString=H.prototype.toString;h("u.each",B);h("u.map",function(a,b,c){if(void 0==a)return[];if(Array.isArray(a))return a.map(b);var d=[];B(a,function(a,m){d.push(b.call(c,m,a))});return d});h("u.copy",function(a){if(void 0==a)return a;if(Array.isArray(a))return a.slice();var b={};B(a,function(a,d){b[a]=d});return b});h("u.generatePseudoGUID",function(a){for(var b="",c=0;c<a;++c)b+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.round(61*Math.random())];return b});h("u.get",C);h("u.lessConsts",D);h("u.UnimplementedException",t);}).call(this); //@ sourceMappingURL=utils.min.js.map
