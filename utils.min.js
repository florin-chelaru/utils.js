/**
* @license utils.js
* Copyright (c) 2015 Florin Chelaru
* License: MIT
*
* Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated
* documentation files (the "Software"), to deal in the Software without restriction, including without limitation the
* rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to
* permit persons to whom the Software is furnished to do so, subject to the following conditions:
*
* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the
* Software.
*
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE
* WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
* COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
* OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
*/
(function(){'use strict';var f,g=this;function l(a,b){var c=a.split("."),d=g;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)c.length||void 0===b?d[e]?d=d[e]:d=d[e]={}:d[e]=b}function m(a,b){function c(){}c.prototype=b.prototype;a.O=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.N=function(a,c,k){for(var h=Array(arguments.length-2),p=2;p<arguments.length;p++)h[p-2]=arguments[p];return b.prototype[c].apply(a,h)}};var n={info:function(a){if("info"==n.VERBOSE){var b=n.LOGGER||console;b.info.apply(b,arguments)}},warn:function(a){if(!(0>["warn","info"].indexOf(n.VERBOSE))){var b=n.LOGGER||console;b.warn.apply(b,arguments)}},error:function(a){if(!(0>["error","warn","info"].indexOf(n.VERBOSE))){var b=n.LOGGER||console;b.error.apply(b,arguments)}}};function q(a,b){if(void 0==a)return a;var c;if(Array.isArray(a))for(c=0;c<a.length&&!1!==b.call(a[c],c,a[c]);++c);else for(c in a)if(!1===b.call(a[c],c,a[c]))break;return a}function r(a){return new Promise(function(b,c){var d=new XMLHttpRequest;d.open("GET",a,!0);d.onreadystatechange=function(){4===d.readyState&&(200!==d.status?c("Request failed with error code "+d.status):b(d.responseText))};d.send()})}
function t(a){return new Promise(function(b){if(a&&(a.content||a.uri))if(a.content){var c={};a.content.split(";").filter(function(a){return 0<a.trim().length}).map(function(a){return a.trim().split(":").map(function(a){return a.trim()})}).forEach(function(a){c[a[0].substr(1)]=a[1]});b(c)}else r(a.uri).then(function(a){return t({content:a})}).then(b);else b({})})};function v(a){0>a&&(a=0);this.a=a;this.f=this.h=this.g=this.c=this.b=this.A=this.w=this.l=this.i=null}f=v.prototype;f.j=function(){null==this.b&&(this.b=Math.floor(this.B()));return this.b};f.u=function(){null==this.c&&(this.c=Math.floor(24*(this.B()-this.j())));return this.c};f.v=function(){null==this.g&&(this.g=Math.floor(60*(this.C()-Math.floor(this.C()))));return this.g};f.K=function(){null==this.h&&(this.h=Math.floor(60*(this.D()-Math.floor(this.D()))));return this.h};
f.J=function(){null==this.f&&(this.f=this.a%1E3);return this.f};f.B=function(){null==this.i&&(this.i=this.a/864E5);return this.i};f.C=function(){null==this.l&&(this.l=this.a/36E5);return this.l};f.D=function(){null==this.w&&(this.w=this.a/6E4);return this.w};f.M=function(){null==this.A&&(this.A=this.a/1E3);return this.A};f.L=function(){return this.a};
f.toString=function(){var a="";0<this.j()&&(a=1<this.j()?a+(this.j()+" days"):a+"one day");0<this.u()&&(a&&(a+=", "),a=1<this.u()?a+(this.u()+" hours"):a+"one hour");0<this.v()?(a&&(a+=" and "),a=1<this.v()?a+(this.v()+" minutes"):a+"one minute"):a||(a+="less than a minute");return w(a)};function x(a,b){this.H=++y;this.a=a;this.b=b}var y=-1;x.prototype.s=function(a){this.a.call(this.b,a)};Object.defineProperties(x.prototype,{id:{get:function(){return this.H}}});function A(a){this.G=a?!!a.P:!1;this.m=0;this.a={};this.o=!1;this.b=a&&a.timeout?a.timeout:A.TIMEOUT}A.TIMEOUT=setTimeout;Object.defineProperties(A.prototype,{synchronous:{get:function(){return this.G}},firing:{get:function(){return this.o}},count:{get:function(){return this.m}}});A.prototype.c=function(a,b){"function"==typeof a&&(a=new x(a,b));this.a[a.id]||++this.m;return this.a[a.id]=a};A.prototype.f=function(a){this.a[a.id]&&(delete this.a[a.id],--this.m)};
A.prototype.s=function(a){if(!this.o){var b=this,c=this.b,d=this.G,e=function(){0!=b.m&&(b.o=d,q(b.a,function(b,e){d?e.s(a):c.call(null,function(){e.s(a)},0)}))};d?e():c.call(null,e,0);this.o=!1}};function B(a,b){this.F=Error(a);this.I=b||null;this.message=this.F.message;this.name="Exception"}m(B,Error);Object.defineProperties(B.prototype,{stack:{get:function(){return this.F.stack}},innerException:{get:function(){return this.I}}});function C(a,b){B.apply(this,arguments);this.name="AbstractMethodException"}m(C,B);function w(a){return a?a.charAt(0).toUpperCase()+a.slice(1):a};(function(a){if(!("Promise"in a)){var b=function(a){if("function"!=typeof a)throw new TypeError("Promise resolver "+a+" is not a function");this.a=[];this.b=[];this.f=this.h=!1;this.g=this.i=void 0;var b=this;try{a(function(a){b.h=!0;b.i=a;b.l(a)},function(a){b.f=!0;b.g=a;b.c(a)})}catch(e){b.c(e)}};b.prototype.then=function(a,d){var e,k,h=new b(function(a,b){e=a;k=b}),p,z;"function"==typeof a&&(p=function(d){try{var h=a.call(null,d);h instanceof b?h.then(e,k):e(h)}catch(p){k(p)}},this.a.push(p));
"function"==typeof d&&(z=function(a){try{var c=d.call(null,a);c instanceof b?c.then(e,k):e(c)}catch(h){k(h)}},this.b.push(z));var F=this;this.h?setTimeout(function(){p.call(null,F.i)},0):this.f&&setTimeout(function(){z.call(null,F.g)},0);return h};b.prototype["catch"]=function(a){return this.then(void 0,a)};b.prototype.l=function(a){this.a.forEach(function(b){setTimeout(function(){console.log("calling resolve callback with value "+a);b.call(null,a)},0)});this.a=[]};b.prototype.c=function(a){this.b.forEach(function(b){setTimeout(function(){b.call(null,
a)},0)});this.b=[]};b.resolve=function(a){return new b(function(b){b(a)})};b.reject=function(a){return new b(function(b,e){e(a)})};b.all=function(a){return a&&a.length?new b(function(d,e){var k=Array(a.length),h=a.length;a.forEach(function(a,c){(a instanceof b?a:b.resolve(a)).then(function(a){k[c]=a;--h;h||d(k)},function(a){e(a)})})}):b.resolve()};a.Promise=b}})(this);function D(a,b){B.apply(this,arguments);this.name="UnimplementedException"}m(D,B);function E(a){return Array.isArray(a)?a:[].slice.apply(a)}function G(a,b){b=b||0;a=a||0;for(var c=Array(a),d=0;d<a;++d)c[d]=d+b;return c};function H(a,b){B.apply(this,arguments);this.name="ReflectionException"}m(H,B);function I(a,b,c){return c?new Promise(function(c){a&&a.length||c();var e;e=Array(a.length+1);e[0]=new Promise(function(a){a()});a.forEach(function(a,c){e[c+1]=e[c].then(function(){return b.call(null,a,c)})});e[a.length].then(c)}):Promise.all(a.map(function(a,c){return b(a,c)}))}function J(){this.b=this.c=null;var a=this;this.a=new Promise(function(b,c){a.c=b;a.b=c})}J.prototype.h=function(a){this.c.call(this.a,a)};J.prototype.g=function(a){this.b.call(this.a,a)};
J.prototype.then=function(a,b){return this.a.then(a,b)};J.prototype.f=function(a){return this.a.catch(a)};function K(a,b,c,d){this.lat=a||0;this.lng=b||0;this.zoom=c||0;this.range=d||0}K.prototype.a=function(a){return void 0==a?!1:this.lat==a.lat&&this.lng==a.lng&&this.zoom==a.zoom&&this.range==a.range};l("u.AbstractMethodException",C);l("u.array.fromArguments",E);l("u.array.fill",function(a,b){a=a||0;for(var c=Array(a),d=0;d<a;++d)c[d]=b;return c});l("u.array.range",G);l("u.array.unique",function(a){return a.reduce(function(a,c){0>a.indexOf(c)&&a.push(c);return a},[])});l("u.async.all",function(a,b){return b?I(a,function(a){return a()},b):Promise.all(a.map(function(a){return a()}))});l("u.async.for",function(a,b,c){return I(G(a),b,c)});l("u.async.each",I);l("u.async.do",function(a){return new Promise(function(b){function c(){return a(d++).then(function(a){return!a||c()})}var d=0;c().then(b)})});l("u.async.Deferred",J);J.prototype.resolve=J.prototype.h;J.prototype.reject=J.prototype.g;J.prototype.then=J.prototype.then;J.prototype["catch"]=J.prototype.f;l("u.EventListener",x);l("u.Event",A);A.prototype.addListener=A.prototype.c;A.prototype.removeListener=A.prototype.f;A.prototype.fire=A.prototype.s;l("u.Exception",B);l("u.Geolocation",K);K.prototype.equals=K.prototype.a;l("u.log",n);l("u.log.info",n.info);l("u.log.warn",n.warn);l("u.log.error",n.error);l("u.math.floorPrecision",function(a,b){if(0==b)return Math.floor(a);var c=Math.pow(10,b);return Math.floor(a*c)/c});l("u.math.scaleLinear",function(a,b){var c=(b[1]-b[0])/(a[1]-a[0]);return function(d){return b[0]+(d-a[0])*c}});l("u.reflection.evaluateFullyQualifiedTypeName",function(a,b){var c;try{for(var d=a.split("."),e=d.pop(),k=b||window,h=0;h<d.length;++h)k=k[d[h]];c=k[e]}catch(p){throw new H("Unknown type name: "+a,p);}if("function"!==typeof c)throw new H("Unknown type name: "+a);return c});l("u.reflection.applyConstructor",function(a,b){return new (Function.prototype.bind.apply(a,[null].concat(E(b))))});
l("u.reflection.wrap",function(a,b){var c={},d;for(d in a)a.hasOwnProperty(d)&&function(b){c[b]={get:function(){return a[b]},set:function(c){a[b]=c},configurable:!0,enumerable:!0}}(d);return Object.create(b.prototype,c)});l("u.reflection.ReflectionException",H);l("u.string.capitalizeFirstLetter",w);l("u.TimeSpan",v);v.prototype.days=v.prototype.j;v.prototype.hours=v.prototype.u;v.prototype.minutes=v.prototype.v;v.prototype.seconds=v.prototype.K;v.prototype.milliseconds=v.prototype.J;v.prototype.totalDays=v.prototype.B;v.prototype.totalHours=v.prototype.C;v.prototype.totalMinutes=v.prototype.D;v.prototype.totalSeconds=v.prototype.M;v.prototype.totalMilliseconds=v.prototype.L;v.prototype.toString=v.prototype.toString;l("u.each",q);l("u.map",function(a,b,c){if(void 0==a)return[];if(Array.isArray(a))return a.map(b);var d=[];q(a,function(a,k){d.push(b.call(c,k,a))});return d});l("u.copy",function(a){if(void 0==a)return a;if(Array.isArray(a))return a.slice();var b={};q(a,function(a,d){b[a]=d});return b});l("u.extend",function(a,b){if(1>=arguments.length)return a;for(var c=1;c<arguments.length;++c){var d=arguments[c],e;for(e in d)d.hasOwnProperty(e)&&(a[e]=d[e])}return a});
l("u.generatePseudoGUID",function(a){for(var b="",c=0;c<a;++c)b+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.round(61*Math.random())];return b});l("u.httpGet",r);l("u.parseLessConsts",t);l("u.UnimplementedException",D);}).call(this); //# sourceMappingURL=utils.min.js.map
