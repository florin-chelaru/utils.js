(function(){/*
 utils.js
 Copyright (c) 2015 Florin Chelaru
 License: MIT

 Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated
 documentation files (the "Software"), to deal in the Software without restriction, including without limitation the
 rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to
 permit persons to whom the Software is furnished to do so, subject to the following conditions:

 The above copyright notice and this permission notice shall be included in all copies or substantial portions of the
 Software.

 gravatarjs:  Ryan ryan@mazondo.com (MIT License)
*/
'use strict';var k;var n=this;function q(a,b){var c=a.split("."),d=n;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var g;c.length&&(g=c.shift());)c.length||void 0===b?d[g]?d=d[g]:d=d[g]={}:d[g]=b}function r(a,b){function c(){}c.prototype=b.prototype;a.ba=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.aa=function(a,c,l){for(var m=Array(arguments.length-2),p=2;p<arguments.length;p++)m[p-2]=arguments[p];return b.prototype[c].apply(a,m)}};function t(a){return Array.isArray(a)?a:[].slice.apply(a)}function v(a,b){b=b||0;a=a||0;for(var c=Array(a),d=0;d<a;++d)c[d]=d+b;return c};function w(a,b){this.L=Error(a);this.U=b||null;this.message=this.L.message;this.name="Exception"}r(w,Error);Object.defineProperties(w.prototype,{stack:{get:function(){return this.L.stack}},innerException:{get:function(){return this.U}}});function x(a,b){w.apply(this,arguments);this.name="ReflectionException"}r(x,w);function A(a,b,c,d){this.lat=a||0;this.lng=b||0;this.zoom=c||0;this.range=d||0}A.prototype.a=function(a){return void 0==a?!1:this.lat==a.lat&&this.lng==a.lng&&this.zoom==a.zoom&&this.range==a.range};function C(a,b){this.T=++aa;this.a=a;this.c=b}var aa=-1;C.prototype.C=function(a){this.a.call(this.c,a)};Object.defineProperties(C.prototype,{id:{get:function(){return this.T}}});function D(a){this.M=a?!!a.ca:!1;this.s=0;this.a={};this.B=!1;this.c=a&&a.timeout?a.timeout:D.TIMEOUT}D.TIMEOUT=setTimeout;Object.defineProperties(D.prototype,{synchronous:{get:function(){return this.M}},firing:{get:function(){return this.B}},count:{get:function(){return this.s}}});D.prototype.f=function(a,b){"function"==typeof a&&(a=new C(a,b));this.a[a.id]||++this.s;return this.a[a.id]=a};D.prototype.i=function(a){this.a[a.id]&&(delete this.a[a.id],--this.s)};
D.prototype.C=function(a){if(!this.B){var b=this,c=this.c,d=this.M,g=function(){0!=b.s&&(b.B=d,E(b.a,function(b,g){d?g.C(a):c.call(null,function(){g.C(a)},0)}))};d?g():c.call(null,g,0);this.B=!1}};function F(a,b,c,d,g,l){this.c=function(b){return(b-a)/c};this.l=function(b){return b*c+a};this.f=function(a){return(a-b)/d};this.m=function(a){return a*d+b};this.u=function(a){return a/c};this.j=function(a){return a*c};this.o=function(a){return a/d};this.i=function(a){return a*d};this.s=0;this.$=g;this.A=l;this.a=new G(0,0,1)}F.prototype.P=function(a,b,c,d,g){H(this,this.a,new I(this.c(a),this.f(b),this.u(c),this.o(d),g));++this.s};
function H(a,b,c){if(null!=b.a){var d=J(b,c);if(null!=d){H(a,d,c);return}}b.f.push(c);if(b.f.length>a.A&&.5*b.size>=a.$&&null==b.a){d=.5*b.size;c=b.m;var g=b.l;b.a=new G(c+d,g,d);b.i=new G(c+d,g+d,d);b.j=new G(c,g+d,d);b.c=new G(c,g,d);for(c=0;c<b.f.length;)d=J(b,b.f[c]),null!=d?H(a,d,b.f.splice(c,1)[0]):++c}}function J(a,b){var c=null,d=a.m+.5*a.size,g=a.l+.5*a.size,l=b.c<g&&b.c+b.f<g,g=b.c>g;b.a<d&&b.a+b.i<d?l?c=a.c:g&&(c=a.j):b.a>d&&(l?c=a.a:g&&(c=a.i));return c}
F.prototype.O=function(a,b){return L(this,this.a,{x:this.c(a),y:this.f(b)},[])};function L(a,b,c,d){Array.prototype.push.apply(d,b.f.filter(function(a){return a.a<=c.x&&a.a+a.i>c.x&&a.c<=c.y&&a.c+a.f>c.y}).map(function(b){return{x:a.l(b.a),y:a.m(b.c),w:a.j(b.i),h:a.i(b.f),value:b.j}}));return null==b.a?d:b.c.m+b.c.size>c.x?b.c.l+b.c.size>c.y?L(a,b.c,c,d):L(a,b.j,c,d):b.a.l+b.a.size>c.y?L(a,b.a,c,d):L(a,b.i,c,d)}
F.prototype.S=function(a,b,c,d){return M(this,this.a,new I(this.c(a),this.f(b),this.u(c),this.o(d)),[])};
function M(a,b,c,d){Array.prototype.push.apply(d,b.f.filter(function(a){return a.a<c.a+c.i&&a.a+a.i>c.a&&a.c<c.c+c.f&&a.c+a.f>c.c}).map(function(b){return{x:a.l(b.a),y:a.m(b.c),w:a.j(b.i),h:a.i(b.f),value:b.j}}));if(null==b.a)return d;var g=J(b,c);if(null!=g)return M(a,g,c,d);var g=b.m+.5*b.size,l=b.l+.5*b.size;if(c.c+c.f<l)return M(a,b.c,c,d),M(a,b.a,c,d);if(c.c>l)return M(a,b.j,c,d),M(a,b.i,c,d);if(c.a+c.i<g)return M(a,b.c,c,d),M(a,b.j,c,d);if(c.a>g)return M(a,b.a,c,d),M(a,b.i,c,d);M(a,b.a,c,d);
M(a,b.i,c,d);M(a,b.j,c,d);return M(a,b.c,c,d)}F.prototype.R=function(){return N(this,this.a,[])};function N(a,b,c){if(null==b.a)return c.push({x:a.l(b.m),y:a.m(b.l),w:a.j(b.size),h:a.i(b.size),items:b.f}),c;N(a,b.a,c);N(a,b.i,c);N(a,b.j,c);N(a,b.c,c);return c}function G(a,b,c){this.m=a;this.l=b;this.size=c;this.c=this.j=this.i=this.a=null;this.f=[]}function I(a,b,c,d,g){this.a=a;this.c=b;this.i=c;this.f=d;this.j=g};function O(a){return a?a.charAt(0).toUpperCase()+a.slice(1):a};function E(a,b){if(void 0==a)return a;var c;if(Array.isArray(a))for(c=0;c<a.length&&!1!==b.call(a[c],c,a[c]);++c);else for(c in a)if(!1===b.call(a[c],c,a[c]))break;return a}function P(a){return new Promise(function(b,c){var d=new XMLHttpRequest;d.open("GET",a,!0);d.onreadystatechange=function(){4===d.readyState&&(200!==d.status?c("Request failed with error code "+d.status):b(d.responseText))};d.send()})}
function Q(a){return new Promise(function(b){if(a&&(a.content||a.uri))if(a.content){var c={};a.content.split(";").filter(function(a){return 0<a.trim().length}).map(function(a){return a.trim().split(":").map(function(a){return a.trim()})}).forEach(function(a){c[a[0].substr(1)]=a[1]});b(c)}else P(a.uri).then(function(a){return Q({content:a})}).then(b);else b({})})}
function R(a){a=a.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(a,c,d,g){return c+c+d+d+g+g});a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);if(!a)throw new w("Invalid hex for hex2rgb");return{r:parseInt(a[1],16),g:parseInt(a[2],16),b:parseInt(a[3],16)}};function S(a){0>a&&(a=0);this.a=a;this.i=this.l=this.j=this.f=this.c=this.A=this.u=this.o=this.m=null}k=S.prototype;k.v=function(){null==this.c&&(this.c=Math.floor(this.I()));return this.c};k.D=function(){null==this.f&&(this.f=Math.floor(24*(this.I()-this.v())));return this.f};k.F=function(){null==this.j&&(this.j=Math.floor(60*(this.J()-Math.floor(this.J()))));return this.j};k.X=function(){null==this.l&&(this.l=Math.floor(60*(this.K()-Math.floor(this.K()))));return this.l};
k.V=function(){null==this.i&&(this.i=this.a%1E3);return this.i};k.I=function(){null==this.m&&(this.m=this.a/864E5);return this.m};k.J=function(){null==this.o&&(this.o=this.a/36E5);return this.o};k.K=function(){null==this.u&&(this.u=this.a/6E4);return this.u};k.Z=function(){null==this.A&&(this.A=this.a/1E3);return this.A};k.Y=function(){return this.a};
k.toString=function(){var a="";0<this.v()&&(a=1<this.v()?a+(this.v()+" days"):a+"one day");0<this.D()&&(a&&(a+=", "),a=1<this.D()?a+(this.D()+" hours"):a+"one hour");0<this.F()?(a&&(a+=" and "),a=1<this.F()?a+(this.F()+" minutes"):a+"one minute"):a||(a+="less than a minute");return O(a)};function T(a,b){w.apply(this,arguments);this.name="UnimplementedException"}r(T,w);function U(a,b){w.apply(this,arguments);this.name="AbstractMethodException"}r(U,w);(function(a){if(!("Promise"in a)){var b=function(a){if("function"!=typeof a)throw new TypeError("Promise resolver "+a+" is not a function");this.a=[];this.c=[];this.i=this.l=!1;this.j=this.m=void 0;var b=this;try{a(function(a){b.l=!0;b.m=a;b.o(a)},function(a){b.i=!0;b.j=a;b.f(a)})}catch(g){b.f(g)}};b.prototype.then=function(a,d){var g,l,m=new b(function(a,b){g=a;l=b}),p,B;"function"==typeof a&&(p=function(d){try{var m=a.call(null,d);m instanceof b?m.then(g,l):g(m)}catch(p){l(p)}},this.a.push(p));
"function"==typeof d&&(B=function(a){try{var c=d.call(null,a);c instanceof b?c.then(g,l):g(c)}catch(m){l(m)}},this.c.push(B));var z=this;this.l?setTimeout(function(){p.call(null,z.m)},0):this.i&&setTimeout(function(){B.call(null,z.j)},0);return m};b.prototype["catch"]=function(a){return this.then(void 0,a)};b.prototype.o=function(a){this.a.forEach(function(b){setTimeout(function(){b.call(null,a)},0)});this.a=[]};b.prototype.f=function(a){this.c.forEach(function(b){setTimeout(function(){b.call(null,
a)},0)});this.c=[]};b.resolve=function(a){return new b(function(b){b(a)})};b.reject=function(a){return new b(function(b,g){g(a)})};b.all=function(a){return a&&a.length?new b(function(d,g){var l=Array(a.length),m=a.length;a.forEach(function(a,c){(a instanceof b?a:b.resolve(a)).then(function(a){l[c]=a;--m;m||d(l)},function(a){g(a)})})}):b.resolve()};a.Promise=b}})(this);var V={info:function(a){if("info"==V.VERBOSE){var b=V.LOGGER||console;b.info.apply(b,arguments)}},warn:function(a){if(!(0>["warn","info"].indexOf(V.VERBOSE))){var b=V.LOGGER||console;b.warn.apply(b,arguments)}},error:function(a){if(!(0>["error","warn","info"].indexOf(V.VERBOSE))){var b=V.LOGGER||console;b.error.apply(b,arguments)}}};function W(a,b,c){return c?new Promise(function(c){a&&a.length||c();var g;g=Array(a.length+1);g[0]=new Promise(function(a){a()});a.forEach(function(a,c){g[c+1]=g[c].then(function(){return b.call(null,a,c)})});g[a.length].then(c)}):Promise.all(a.map(function(a,c){return b(a,c)}))}function Z(){this.c=this.f=null;var a=this;this.a=new Promise(function(b,c){a.f=b;a.c=c})}Z.prototype.l=function(a){this.f.call(this.a,a)};Z.prototype.j=function(a){this.c.call(this.a,a)};
Z.prototype.then=function(a,b){return this.a.then(a,b)};Z.prototype.i=function(a){return this.a.catch(a)};q("u.AbstractMethodException",U);q("u.array.fromArguments",t);q("u.array.fill",function(a,b){a=a||0;for(var c=Array(a),d=0;d<a;++d)c[d]=b;return c});q("u.array.range",v);q("u.array.unique",function(a){return a.reduce(function(a,c){0>a.indexOf(c)&&a.push(c);return a},[])});q("u.array.uniqueFast",function(a){var b=[],c={};a.forEach(function(a){c[a]||(b.push(a),c[a]=!0)});return b});q("u.array.indexOf",function(a,b,c){for(var d=0;d<a.length;++d)if(b.call(c,a[d],d))return d;return-1});q("u.async.all",function(a,b){return b?W(a,function(a){return a()},b):Promise.all(a.map(function(a){return a()}))});q("u.async.for",function(a,b,c){return W(v(a),b,c)});q("u.async.each",W);q("u.async.do",function(a){return new Promise(function(b){function c(){return a(d++).then(function(a){return!a||c()})}var d=0;c().then(b)})});q("u.async.Deferred",Z);Z.prototype.resolve=Z.prototype.l;Z.prototype.reject=Z.prototype.j;Z.prototype.then=Z.prototype.then;Z.prototype["catch"]=Z.prototype.i;q("u.EventListener",C);q("u.Event",D);D.prototype.addListener=D.prototype.f;D.prototype.removeListener=D.prototype.i;D.prototype.fire=D.prototype.C;q("u.Exception",w);void 0==Object.getOwnPropertyDescriptor(w.prototype,"myprop")&&Object.defineProperty(w.prototype,"myprop",{configurable:!0,enumerable:!0,get:function(){return this.W},set:function(a){this.W=a}});q("u.Geolocation",A);A.prototype.equals=A.prototype.a;q("u.log",V);q("u.log.info",V.info);q("u.log.warn",V.warn);q("u.log.error",V.error);q("u.math.floorPrecision",function(a,b){if(0==b)return Math.floor(a);var c=Math.pow(10,b);return Math.floor(a*c)/c});q("u.math.scaleLinear",function(a,b){var c=(b[1]-b[0])/(a[1]-a[0]);return function(d){return b[0]+(d-a[0])*c}});q("u.math.deg2rad",function(a){return a*Math.PI/180});q("u.math.rad2deg",function(a){return 180*a/Math.PI});q("u.QuadTree",F);F.prototype.insert=F.prototype.P;F.prototype.collisions=F.prototype.O;F.prototype.overlaps=F.prototype.S;F.prototype.leaves=F.prototype.R;q("u.reflection.evaluateFullyQualifiedTypeName",function(a,b){var c;try{for(var d=a.split("."),g=d.pop(),l=b||window,m=0;m<d.length;++m)l=l[d[m]];c=l[g]}catch(p){throw new x("Unknown type name: "+a,p);}if("function"!==typeof c)throw new x("Unknown type name: "+a);return c});q("u.reflection.applyConstructor",function(a,b){return new (Function.prototype.bind.apply(a,[null].concat(t(b||[]))))});
q("u.reflection.wrap",function(a,b){if(a instanceof b)return a;var c={},d;for(d in a)a.hasOwnProperty(d)&&function(b){c[b]={get:function(){return a[b]},set:function(c){a[b]=c},configurable:!0,enumerable:!0}}(d);return Object.create(b.prototype,c)});q("u.reflection.ReflectionException",x);q("u.string.capitalizeFirstLetter",O);q("u.TimeSpan",S);S.prototype.days=S.prototype.v;S.prototype.hours=S.prototype.D;S.prototype.minutes=S.prototype.F;S.prototype.seconds=S.prototype.X;S.prototype.milliseconds=S.prototype.V;S.prototype.totalDays=S.prototype.I;S.prototype.totalHours=S.prototype.J;S.prototype.totalMinutes=S.prototype.K;S.prototype.totalSeconds=S.prototype.Z;S.prototype.totalMilliseconds=S.prototype.Y;S.prototype.toString=S.prototype.toString;q("u.each",E);q("u.map",function(a,b,c){if(void 0==a)return[];if(Array.isArray(a))return a.map(b);var d=[];E(a,function(a,l){d.push(b.call(c,l,a))});return d});q("u.copy",function(a){if(void 0==a)return a;if(Array.isArray(a))return a.slice();var b={};E(a,function(a,d){b[a]=d});return b});q("u.extend",function(a,b){if(1>=arguments.length)return a;for(var c=1;c<arguments.length;++c){var d=arguments[c],g;for(g in d)d.hasOwnProperty(g)&&(a[g]=d[g])}return a});
q("u.generatePseudoGUID",function(a){for(var b="",c=0;c<a;++c)b+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.round(61*Math.random())];return b});q("u.httpGet",P);q("u.parseLessConsts",Q);q("u.reflowForTransition",function(a){return a.offsetWidth});
q("u.gravatar",function(a,b){function c(a,b){var c=a[0],e=a[1],f=a[2],h=a[3],c=g(c,e,f,h,b[0],7,-680876936),h=g(h,c,e,f,b[1],12,-389564586),f=g(f,h,c,e,b[2],17,606105819),e=g(e,f,h,c,b[3],22,-1044525330),c=g(c,e,f,h,b[4],7,-176418897),h=g(h,c,e,f,b[5],12,1200080426),f=g(f,h,c,e,b[6],17,-1473231341),e=g(e,f,h,c,b[7],22,-45705983),c=g(c,e,f,h,b[8],7,1770035416),h=g(h,c,e,f,b[9],12,-1958414417),f=g(f,h,c,e,b[10],17,-42063),e=g(e,f,h,c,b[11],22,-1990404162),c=g(c,e,f,h,b[12],7,1804603682),h=g(h,c,e,f,
b[13],12,-40341101),f=g(f,h,c,e,b[14],17,-1502002290),e=g(e,f,h,c,b[15],22,1236535329),c=l(c,e,f,h,b[1],5,-165796510),h=l(h,c,e,f,b[6],9,-1069501632),f=l(f,h,c,e,b[11],14,643717713),e=l(e,f,h,c,b[0],20,-373897302),c=l(c,e,f,h,b[5],5,-701558691),h=l(h,c,e,f,b[10],9,38016083),f=l(f,h,c,e,b[15],14,-660478335),e=l(e,f,h,c,b[4],20,-405537848),c=l(c,e,f,h,b[9],5,568446438),h=l(h,c,e,f,b[14],9,-1019803690),f=l(f,h,c,e,b[3],14,-187363961),e=l(e,f,h,c,b[8],20,1163531501),c=l(c,e,f,h,b[13],5,-1444681467),h=
l(h,c,e,f,b[2],9,-51403784),f=l(f,h,c,e,b[7],14,1735328473),e=l(e,f,h,c,b[12],20,-1926607734),c=d(e^f^h,c,e,b[5],4,-378558),h=d(c^e^f,h,c,b[8],11,-2022574463),f=d(h^c^e,f,h,b[11],16,1839030562),e=d(f^h^c,e,f,b[14],23,-35309556),c=d(e^f^h,c,e,b[1],4,-1530992060),h=d(c^e^f,h,c,b[4],11,1272893353),f=d(h^c^e,f,h,b[7],16,-155497632),e=d(f^h^c,e,f,b[10],23,-1094730640),c=d(e^f^h,c,e,b[13],4,681279174),h=d(c^e^f,h,c,b[0],11,-358537222),f=d(h^c^e,f,h,b[3],16,-722521979),e=d(f^h^c,e,f,b[6],23,76029189),c=
d(e^f^h,c,e,b[9],4,-640364487),h=d(c^e^f,h,c,b[12],11,-421815835),f=d(h^c^e,f,h,b[15],16,530742520),e=d(f^h^c,e,f,b[2],23,-995338651),c=m(c,e,f,h,b[0],6,-198630844),h=m(h,c,e,f,b[7],10,1126891415),f=m(f,h,c,e,b[14],15,-1416354905),e=m(e,f,h,c,b[5],21,-57434055),c=m(c,e,f,h,b[12],6,1700485571),h=m(h,c,e,f,b[3],10,-1894986606),f=m(f,h,c,e,b[10],15,-1051523),e=m(e,f,h,c,b[1],21,-2054922799),c=m(c,e,f,h,b[8],6,1873313359),h=m(h,c,e,f,b[15],10,-30611744),f=m(f,h,c,e,b[6],15,-1560198380),e=m(e,f,h,c,b[13],
21,1309151649),c=m(c,e,f,h,b[4],6,-145523070),h=m(h,c,e,f,b[11],10,-1120210379),f=m(f,h,c,e,b[2],15,718787259),e=m(e,f,h,c,b[9],21,-343485551);a[0]=z(c,a[0]);a[1]=z(e,a[1]);a[2]=z(f,a[2]);a[3]=z(h,a[3])}function d(a,b,c,d,f,h){b=z(z(b,a),z(d,h));return z(b<<f|b>>>32-f,c)}function g(a,b,c,e,f,h,g){return d(b&c|~b&e,a,b,f,h,g)}function l(a,b,c,e,f,h,g){return d(b&e|c&~e,a,b,f,h,g)}function m(a,b,c,e,f,h,g){return d(c^(b|~e),a,b,f,h,g)}function p(a){var b=a.length,d=[1732584193,-271733879,-1732584194,
271733878],e;for(e=64;e<=a.length;e+=64){for(var f=a.substring(e-64,e),h=[],g=void 0,g=0;64>g;g+=4)h[g>>2]=f.charCodeAt(g)+(f.charCodeAt(g+1)<<8)+(f.charCodeAt(g+2)<<16)+(f.charCodeAt(g+3)<<24);c(d,h)}a=a.substring(e-64);f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<a.length;e++)f[e>>2]|=a.charCodeAt(e)<<(e%4<<3);f[e>>2]|=128<<(e%4<<3);if(55<e)for(c(d,f),e=0;16>e;e++)f[e]=0;f[14]=8*b;c(d,f);return d}function B(a){for(var b=0;b<a.length;b++){for(var c=a[b],d="",f=0;4>f;f++)d+=X[c>>8*f+4&15]+X[c>>8*
f&15];a[b]=d}return a.join("")}function z(a,b){return a+b&4294967295}var X="0123456789abcdef".split("");"5d41402abc4b2a76b9719d911017c592"!=B(p("hello"))&&(z=function(a,b){var c=(a&65535)+(b&65535);return(a>>16)+(b>>16)+(c>>16)<<16|c&65535});var y=b||{},Y,K=[],y={size:y.size||"50",H:y.H||"g",N:y.N||"https:"===location.protocol,G:y.G||""};a=a.trim().toLowerCase();Y=y.N?"https://secure.gravatar.com/avatar/":"http://www.gravatar.com/avatar/";y.H&&K.push("r="+y.H);y.G&&K.push("d="+encodeURIComponent(y.G));
y.size&&K.push("s="+y.size);return Y+B(p(a))+"?"+K.join("&")});q("u.hex2rgb",R);q("u.hex2rgba",function(a,b){var c=R(a);void 0==b&&(b=1);return"rgba("+c.r+","+c.g+","+c.b+","+b+")"});q("u.rgb2hex",function(a,b,c){return"#"+(16777216+(a<<16)+(b<<8)+c).toString(16).slice(1)});q("u.UnimplementedException",T);}).call(this); //# sourceMappingURL=utils.min.js.map
